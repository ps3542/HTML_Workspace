<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>jQuery연습문제2</title>
  <style>
    .animation-canvas {
      overflow:hidden;
      position:relative;
      width:600px; height:400px;
    }
    .slider-panel { 
      position:relative; 
      left:0; 
    }
    .slider-image { 
      float:left; 
      width:600px; 
      height:400px; 
    }
    /* 도트 패널 */
    .control-panel {
      position:absolute; 
      bottom:10px;
      left:50%;
      transform:translateX(-50%);
      color:rgb(4, 0, 252);
      z-index:500; /* 🔥 도트도 앞으로 */
    }
    .dot {
      font-size:30px;
      cursor:pointer;
      margin:0 5px;
      opacity:0.5;
    }
    .dot.active { opacity:1; }

    /* 화살표 */
    .arrow {
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      font-size:40px;
      cursor:pointer;
      user-select:none;
      color:#fff;
      background:rgba(0,0,0,0.3);
      padding:5px 10px;
      border-radius:50%;
      z-index:1000; /* 🔥 이미지 위에 오도록 보장 */
    }
    .prev { left:10px; }
    .next { right:10px; }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script>
    // 연습문제 1
    $(document).ready(function(){
      $.getJSON("https://www.data.go.kr/catalog/15029361/fileData.json", function(data){ // JSON 데이터 가져오기
        // name과 description 추출
        let name = data.name;
        let description = data.description;

        // 화면에 출력
        $("#output").append("<p>" + name + "</p>"); 
        $("#output").append("<p>" + description + "</p>");
      })
      // 연습문제 2
      let currentIndex = 0;
      let $images = $(".slider-image");
      let totalSlides = $images.length;
      let slideWidth = 600;

      // 패널 너비 = 이미지 개수 × 슬라이드 폭
      $(".slider-panel").css("width", totalSlides * slideWidth);

      function moveSlider(index){
        let willMoveLeft = -(index * slideWidth);
        $(".slider-panel").stop().animate({ left: willMoveLeft }, 'slow');
        currentIndex = index;
        updateDots();
      }

      function updateDots(){
        $(".dot").removeClass("active").eq(currentIndex).addClass("active");
      }

      // 도트 클릭
      $(".dot").click(function(){
        let idx = $(".dot").index(this);
        moveSlider(idx);
      });

      // prev 버튼
      $(".prev").click(function(){
        let idx = (currentIndex - 1 + totalSlides) % totalSlides;
        moveSlider(idx);
      });

      // next 버튼
      $(".next").click(function(){
        let idx = (currentIndex + 1) % totalSlides;
        moveSlider(idx);
      });

      // 초기 상태
      updateDots();
    });

  </script>
</head>
<body>
  <!-- 연습문제 1 -->
  <div id="output"></div>
  <!-- /연습문제1 -->
  <!-- 연습문제2 -->
  <div class="animation-canvas">
    <!-- 화살표 -->
    <span class="arrow prev">&#10094;</span>
    <span class="arrow next">&#10095;</span>

    <!-- 슬라이더 -->
    <div class="slider-panel">
      <img src="img/pic1.jpg" class="slider-image"/>
      <img src="img/pic2.jpg" class="slider-image"/>
      <img src="img/pic3.jpg" class="slider-image"/>
      <img src="img/pic4.png" class="slider-image"/>
      <img src="img/pic5.png" class="slider-image"/>
    </div>

    <!-- 도트 -->
    <div class="control-panel">
      <span class="dot">*</span>
      <span class="dot">*</span>
      <span class="dot">*</span>
      <span class="dot">*</span>
      <span class="dot">*</span>
    </div>
  </div>
  <!-- /연습문제2 -->
   
</body>
</html>